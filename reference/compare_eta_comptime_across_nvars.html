<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compare runtime using CGGibbs and naive approach to calculate linear predictor — compare_eta_comptime_across_nvars • mcmcglm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compare runtime using CGGibbs and naive approach to calculate linear predictor — compare_eta_comptime_across_nvars"><meta name="description" content="The comparison of the methods is described in
this vignette.
The user can specify different arguments to alter the specification of the comparison, but it's
possible to only specify values of the n_vars argument. It's not possible to change the fact that
data is simulated with a normal response and normal explanatory variables."><meta property="og:description" content="The comparison of the methods is described in
this vignette.
The user can specify different arguments to alter the specification of the comparison, but it's
possible to only specify values of the n_vars argument. It's not possible to change the fact that
data is simulated with a normal response and normal explanatory variables."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mcmcglm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/pospkg.html">Examples of family, prior and slice sampler specifications</a></li>
    <li><a class="dropdown-item" href="../articles/customising.html">Adding methods for families</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Performance of package</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mathiaslj/mcmcglm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compare runtime using CGGibbs and naive approach to calculate linear predictor</h1>
      <small class="dont-index">Source: <a href="https://github.com/mathiaslj/mcmcglm/blob/main/R/measure_performance.R" class="external-link"><code>R/measure_performance.R</code></a></small>
      <div class="d-none name"><code>compare_eta_comptime_across_nvars.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The comparison of the methods is described in
<a href="https://mathiaslj.github.io/mcmcglm/articles/pospkg.html#advantage-of-cggibbs">this vignette</a>.
The user can specify different arguments to alter the specification of the comparison, but it's
possible to only specify values of the <code>n_vars</code> argument. It's not possible to change the fact that
data is simulated with a normal response and normal explanatory variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compare_eta_comptime_across_nvars</span><span class="op">(</span></span>
<span>  <span class="va">n_vars</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  beta_prior <span class="op">=</span> <span class="fu">distributional</span><span class="fu">::</span><span class="fu"><a href="https://pkg.mitchelloharawild.com/distributional/reference/dist_normal.html" class="external-link">dist_normal</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  log_likelihood_extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  sample_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"slice_sampling"</span>, <span class="st">"normal-normal"</span><span class="op">)</span>,</span>
<span>  qslice_fun <span class="op">=</span> <span class="fu">qslice</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/qslice/man/slice_stepping_out.html" class="external-link">slice_stepping_out</a></span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  n_samples <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  burnin <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  parallelise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"NUMBER_OF_PROCESSORS"</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n-vars">n_vars<a class="anchor" aria-label="anchor" href="#arg-n-vars"></a></dt>
<dd><p>a <code>numeric vector</code> with numbers of normally distributed columns in the design matrix
for different runs</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>a <code>numeric</code> with the number of observations in the data analysed by the GLM</p></dd>


<dt id="arg-beta-prior">beta_prior<a class="anchor" aria-label="anchor" href="#arg-beta-prior"></a></dt>
<dd><p>a <code>distribution</code> object created by a function from the
<code>distributional</code> package. Could fx. be <code>distributional::dist_normal(mean = 0, sd = 1)</code>.</p></dd>


<dt id="arg-log-likelihood-extra-args">log_likelihood_extra_args<a class="anchor" aria-label="anchor" href="#arg-log-likelihood-extra-args"></a></dt>
<dd><p>a named <code>list</code> with arguments passed onto the <a href="log_density.html">log_density</a> function.
Fx. specification of <code>log_likelihood_extra_args = list(sd = x)</code> is needed for the case of
<code>family = "gaussian"</code></p></dd>


<dt id="arg-sample-method">sample_method<a class="anchor" aria-label="anchor" href="#arg-sample-method"></a></dt>
<dd><p>a <code>character</code> specifying the method used for sampling. The default <code>"slice_sampling"</code>
is the intended value in most cases, as it works for any specification of <code>family</code> and <code>beta_prior</code>.
<code>"normal-normal"</code> uses a conditional normal distribution to sample from in case of conjugate prior with
gaussian response and <code>beta_prior</code>. Implemented for testing purposes but works for that niche case.</p></dd>


<dt id="arg-qslice-fun">qslice_fun<a class="anchor" aria-label="anchor" href="#arg-qslice-fun"></a></dt>
<dd><p>a <code>function</code> from the
<a href="https://CRAN.R-project.org/package=qslice" class="external-link">qslice</a> package.
Default is <a href="https://rdrr.io/pkg/qslice/man/slice_stepping_out.html" class="external-link">qslice::slice_stepping_out</a> which uses the slice sampler from
<a href="https://projecteuclid.org/journals/annals-of-statistics/volume-31/issue-3/Slice-sampling/10.1214/aos/1056562461.full" class="external-link">Neal 2003</a>,
but all functions are available.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments passed onto the function specified by <code>qslice_fun</code>. For default <a href="https://rdrr.io/pkg/qslice/man/slice_stepping_out.html" class="external-link">qslice::slice_stepping_out</a>
<code>w</code> needs to be specified, while for fx. <a href="https://rdrr.io/pkg/qslice/man/slice_elliptical.html" class="external-link">qslice::slice_elliptical</a>, <code>mu</code> and <code>sigma</code> need to be specified</p></dd>


<dt id="arg-n-samples">n_samples<a class="anchor" aria-label="anchor" href="#arg-n-samples"></a></dt>
<dd><p>a <code>numeric</code> with number of samples to draw of each parameter(/variable) in the model</p></dd>


<dt id="arg-burnin">burnin<a class="anchor" aria-label="anchor" href="#arg-burnin"></a></dt>
<dd><p>a <code>numeric</code> with the number of samples to be marked as "burnin". Burnin samples are not
included in the <code>beta_mean</code> calculation to increase finite sample performance of the LLN estimate</p></dd>


<dt id="arg-parallelise">parallelise<a class="anchor" aria-label="anchor" href="#arg-parallelise"></a></dt>
<dd><p>a <code>logical</code> if the runs of the algorithm across values of <code>n_vars</code> should be
parallelised using <a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply::future_lapply</a></p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>a <code>numeric</code> with the number of cores to use for parallelisation. Default is 1 less
than the number of available cores</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>data.frame</code> with information on computation time for different values of <code>n_vars</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Compare the runtime for 2, 20, 40, 60 variables in the model</span></span></span>
<span class="r-in"><span><span class="fu">compare_eta_comptime_across_nvars</span><span class="op">(</span>n_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">20</span>, to <span class="op">=</span> <span class="fl">60</span>, by <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  n_samples <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>                                  burnin <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■                         </span>  21% | ETA:  4s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■     </span>  87% | ETA:  0s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■            </span>  63% | ETA:  1s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■                             </span>   6% | ETA: 27s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■                 </span>  45% | ETA:  6s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■     </span>  85% | ETA:  1s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■                            </span>   9% | ETA: 19s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■                 </span>  45% | ETA:  6s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■      </span>  84% | ETA:  1s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■                               </span>   1% | ETA:  3m</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■                            </span>  10% | ETA: 44s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■                      </span>  29% | ETA: 19s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■                </span>  51% | ETA: 10s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■         </span>  73% | ETA:  5s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  </span>  97% | ETA:  1s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■                             </span>   6% | ETA: 39s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■                      </span>  29% | ETA: 14s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■               </span>  53% | ETA:  8s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■        </span>  78% | ETA:  3s</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling from posterior <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              time linear_predictor_calc n_vars n_samples beta_mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.3153636 secs                update      2       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.2818551 secs                 naive      2       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3.7287543 secs                update     20       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  3.7928767 secs                 naive     20       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  8.8522904 secs                update     40       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  9.1041164 secs                 naive     40       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 17.2623024 secs                update     60       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 14.2019286 secs                 naive     60       100         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   beta_variance   family sd                 qslice_fun   w parallelised</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8             1 gaussian  1 qslice::slice_stepping_out 0.5        FALSE</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mathias Lerbech Jeppesen, Julie Køhler Munkvad.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

